@page "/CompactUserTask"

@using MediatR;
@using TrackYourDay.Web.Components

<MudPaper Class="d-flex flex-grow-1 gap-0" Elevation="0">
    <MudGrid Class="w-100">
        <MudItem xs="10"> 
            <!-- First column for UserTaskComponent -->
            <UserTaskComponent Mode="ViewMode.Compact" OnUserTaskEnded="@UserTaskEnded"></UserTaskComponent>
        </MudItem>
        <MudItem xs="2" Class="d-flex flex-column align-items-center"> 
            <!-- Second column for buttons -->
            <MudIconButton Icon="@Icons.Material.Filled.Maximize" class="pa-0 mb-1" @onclick="ToggleTitleBarVisibility" />
            <MudIconButton Icon="@Icons.Material.Filled.Minimize" class="pa-0" @onclick="MinimizeWindow" />
        </MudItem>
    </MudGrid>
</MudPaper>

@code {
    [Inject]
    public IMediator mediator { get; set; }

    [CascadingParameter(Name = "ParentMauiWindowId")]
    public Guid ParentMauiWindowId { get; set; }

    private void UserTaskEnded()
    {
        //Close window
    }

    private void MinimizeWindow() 
    {
        throw new Exception("Fix this");
        // this.mediator.Send(new MinimizeWindowCommand(this.ParentMauiWindowId));
    }

    private void ToggleTitleBarVisibility()
    {
        throw new Exception("Fix this");
        // this.mediator.Send(new ToggleWindowHeaderVisibilityCommand(this.ParentMauiWindowId));
    }
}